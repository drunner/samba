#!/bin/bash
DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
. $DIR/bash.conf

function checkvolexists {
  docker volume ls | grep $1 > /dev/null
  if [ $? -ne 0 ] ; then
     echo "run init before trying to configure samba."
     exit 1
  fi
}
checkvolexists samba-etc
checkvolexists samba-extrausers
checkvolexists samba-varlib

docker run -ti -h ${HOSTNAME} --name sambadebug -v samba-etc:/etc/samba -v samba-varlib:/var/lib/samba -v samba-extrausers:/var/lib/extrausers -p 137:137/udp -p 138:138/udp -p 135:135 -p 139:139 -p 445:445 ${CONTAINER_NAME} /bin/bash

docker rm sambadebug


