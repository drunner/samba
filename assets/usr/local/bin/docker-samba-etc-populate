#!/bin/bash
cp -a /etc/samba/* /tempmount/

mkdir /tempmount/dockershareinfo
touch /tempmount/initcomplete

cat <<EOF > /tempmount/smb.conf
[global]
        netbios name = ${HOSTNAME}
        server string = %h server (Samba, Docker)
        server role = standalone server
        map to guest = Bad User
        guest account = PCGUEST
        syslog = 0
        log file = /var/log/samba/log.%m
        max log size = 1000
        dns proxy = No
        idmap config * : backend = tdb
        security = user
        encrypt passwords = true
        passdb backend = tdbsam
        obey pam restrictions = yes        
        unix password sync = no
        pam password change = no
        hosts allow = ALL
EOF
